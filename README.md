# Алгоритмы и структуры данных. Set 5. Задача A3i. Экспериментальные данные HyperLogLog

Данный репозиторий содержит результаты экспериментального исследования  
точности алгоритма **HyperLogLog (HLL)** для оценки числа уникальных элементов в потоках данных.

Алгоритм HLL — это **вероятностный потоковый алгоритм**, который оценивает количество уникальных объектов $N_t$ в потоке $S$ на момент времени $t$, соответствующего частотному моменту $F_{t0}$.  

В рамках работы исследовались:

- **Стандартный HyperLogLog** с $m = 2^{B}$ регистрами ($B$ выбиралось экспериментально)  
- **Улучшенный HyperLogLog**, включающий:
  - Бит-пакованные регистры для экономии памяти  
  - Коррекцию малых потоков (Linear Counting)  

---

## Типы исследуемых потоков

Для анализа эффективности алгоритмов использовались несколько потоков различного размера:

| Поток | Описание |
|-------|----------|
| **Stream 1–5** | Случайные строки длиной до 30 символов, содержащие латинские буквы, цифры 0–9 и тире |

Потоки анализировались по **долям обработанного потока** (fraction):

- 0.1, 0.2, 0.3, 0.5, 0.7, 1.0  

---

## Содержимое репозитория

| Файл | Описание |
|------|----------|
| **hll_data.csv, hll_data_after_upgrade** | Данные эксперимента: оценка числа уникальных элементов стандартным и улучшенным HLL |
| **HyperLogLog.hpp / HyperLogLogPacked.hpp** | Исходный код реализации стандартного и улучшенного HyperLogLog |
| **RandomStreamGen.hpp** | Исходный код класса для генерации потоков строк |
| **HashFuncGen.hpp** | Исходный код класса генерации MurmurHash |
---

## Формат данных CSV

Каждая строка описывает результат эксперимента для конкретного потока и доли обработанного потока:

| Поле | Тип данных | Описание |
|------|------------|----------|
| **stream_id** | int | Номер потока |
| **fraction** | float | Доля обработанного потока $t$ (0.1–1.0) |
| **exact** | int | Точное число уникальных элементов $F_{t0}$ |
| **estimate** | float | Оценка $N_t$, полученная HLL |

Пример данных:

| stream_id | fraction | exact | estimate |
|-----------|----------|-------|----------|
| 1         | 0.1      | 993   | 979.14   |
| 1         | 0.5      | 4872  | 4549.51  |
| 1         | 1.0      | 9711  | 9951.74  |

---

## Анализ

- **Стандартный HLL** показывает высокую точность для больших потоков, но завышает оценку на малых долях потока.  
- **Улучшенный HLL** с коррекцией малых потоков (Linear Counting) и бит-пакованными регистрами:
  - Уменьшает завышение оценок на малых потоках до ~1–2\%  
  - Сохраняет точность и стабильность на больших потоках  
  - Снижает потребление памяти примерно на 20–25\%
